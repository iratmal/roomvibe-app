# TASK: 360Â° Gallery â€“ Artwork Textures Not Rendering (Black Planes Bug)

---

## ğŸ”´ Problem (Critical Bug)

U 360Â° Editoru i u public vieweru, svi artworki se prikazuju kao **crni kvadrati**, iako:

* u **Wall Slots** sidebaru thumbnaili rade ispravno,
* API vraÄ‡a ispravne image URL-ove,
* teksture se uspjeÅ¡no dohvaÄ‡aju (nema network errora),
* build i cache se uÄitavaju ispravno (dokaz: pink test wall se pojavljuje).

Dakle â†’ **100% je u Three.js / React Three Fiber teksture loaderu ili material setupu.**

Bug je 100% u Three.js / React Three Fiber teksture loaderu ili material setupu.

---

## ğŸ§ª Reprodukcija

1. Admin â†’ **Gallery Impersonation**
2. Exhibition ID: `2`
3. 360Â° Editor â†’ **Modern Gallery**
4. Postavi bilo koji artwork â†’ zid prikazuje **crni plane**.

Cache obrisan, Force Reload napravljen â†’ rezultat isti.

---

## ğŸŸ¡ VaÅ¾ni tragovi

### 1. Pink test-wall je vidljiv â†’ build je deployan

ZnaÄi browser uÄitava najnoviji kod.

### 2. Sidebar thumbnail prikazuje artwork ispravno

â†’ znaÄi API + image fetch funkcionira.

### 3. U WebGL canvasu tekstura NE dolazi do materiala

â†’ najvjerojatnije:

* textureLoader nije resolve-an prije rendera
* texture encoding nije kompatibilan (`sRGBEncoding` vs `LinearEncoding`)
* material nema map property postavljen
* meshStandardMaterial gasi teksturu ako nema svjetla / ako intensity = 0
* CORS security blokira WebGL texture (bez error poruke!)
* canvas je "tainted" ali bez vidljivog crvenog errora
* plane je okrenut krivo (backface culled)

---

## ğŸŸ© Å to trebaÅ¡ provjeriti i popraviti (obavezno)

### 1. Zamijeni material privremeno s `meshBasicMaterial`

Ako se tada slika renderira â†’ problem je u osvjetljenju (intensity, tone mapping, exposure, physical lights).

â†’ Ako se NE renderira â†’ problem je texture mapping / CORS.

---

### 2. Console debug u loaderu

Umjesto tihe greÅ¡ke, dodaj:

console.log("Loading texture:", url);
console.log("Texture loaded:", texture);
console.log("Material:", material);

Ako se texture vraÄ‡a kao `null` ili `undefined` â†’ URL nije kompatibilan za WebGL texture.

---

### 3. Provjeri da li radiÅ¡:

* `texture.encoding = THREE.sRGBEncoding`
* `material.map = texture`
* `material.needsUpdate = true`

Bez posljednjeg, Three.js neÄ‡e primijeniti novu teksturu.

---

### 4. Provjeri CORS za slike

Ako API vraÄ‡a slike bez:

`Access-Control-Allow-Origin: *`

WebGL ih ponekad proguta bez errora i texture postane **crna**.

---

### 5. Testiraj sa hard-coded lokalnom teksturom

Ako lokalni `test.jpg` radi, a API URL ne radi â†’ onda je 100% CORS.

---

### 6. Provjeri da li su UV koordinatne scale ispravne

Ako je:

* `material.map.repeat.set(0,0)`
  ili
* `material.map.offset.set(999,999)`

tekstura Ä‡e biti crna.

---

## ğŸ¯ Cilj

* svaka slika se mora prikazati na svome planeu, u pravoj veliÄini i omjeru,
* bez crnih placeholdera,
* bez potrebe za refresh trikovima.

---

## ğŸ“Œ Napomena

Irena vidi pink zid â†’ build je deployan.

Ali i dalje vidi crne artworke â†’ tekstura nije renderirana.
Bug se mora reproducirati lokalno kod tebe (agenta) **bez oslanjanja na njen browser**.

---

## ğŸ™ Molimo

Reproduciraj bug lokalno, dodaj privremeni debug overlay i popravi texture pipeline.

Kada popraviÅ¡ material/texture mapping, molim te potvrdi.
