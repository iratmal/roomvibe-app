# ğŸ¯ TASK ZA REPLIT AGENTA â€” LIVE / PRODUCTION ONLY

**Cilj:**
Osigurati da se **roomvibe.app** i **[www.roomvibe.app](http://www.roomvibe.app)** uvijek ispravno i trajno (301) redirektaju na **[https://app.roomvibe.app](https://app.roomvibe.app)**, bez loopova i bez oslanjanja na Namecheap redirect.

---

## ğŸ”´ VAÅ½NO â€” OPSEG TASKA

* â— OVO SE RADI ISKLJUÄŒIVO NA **PRODUCTION / LIVE**
* âŒ NE raditi niÅ¡ta u stagingu
* âŒ Ne dirati Namecheap (DNS je veÄ‡ oÄiÅ¡Ä‡en)

---

## 1ï¸âƒ£ Replit â€” Production Deployment

**Projekt:** RoomVibe

Agent treba:

* Otvoriti **Replit â†’ Deployments â†’ Production**
* Dodati sljedeÄ‡e **Custom Domains**:

  * `roomvibe.app`
  * `www.roomvibe.app`

â¡ï¸ Oba moraju pokazivati na **isti production deployment** koji trenutno sluÅ¾i `app.roomvibe.app`

---

## 2ï¸âƒ£ Server-side redirect (Express middleware)

U **production server kodu** dodati redirect guard:

### Pravilo

* Ako request dolazi na:

  * `roomvibe.app`
  * `www.roomvibe.app`
* onda napraviti **301 redirect** na:

  * `https://app.roomvibe.app`
* saÄuvati:

  * path (`/studio`, `/api/health`, itd.)
  * query string

### Obavezno

* âŒ Ne smije napraviti redirect loop
* âœ… Ako je `host === app.roomvibe.app` â†’ **ne radi niÅ¡ta**

### Pseudologika (za razumijevanje)

```
if host !== 'app.roomvibe.app':
  redirect 301 to https://app.roomvibe.app + originalPath + query
```

Agent neka implementira Äisto i sigurno, uzimajuÄ‡i u obzir `X-Forwarded-Host` ako je potrebno.

---

## 3ï¸âƒ£ Testiranje (obavezno potvrditi)

Nakon deploya, agent mora potvrditi da sljedeÄ‡e radi:

* âœ… [https://roomvibe.app](https://roomvibe.app) â†’ [https://app.roomvibe.app](https://app.roomvibe.app)
* âœ… [https://www.roomvibe.app](https://www.roomvibe.app) â†’ [https://app.roomvibe.app](https://app.roomvibe.app)
* âœ… [https://roomvibe.app/api/health/env](https://roomvibe.app/api/health/env) â†’ redirect â†’ app.roomvibe.app/api/health/env

Bez errora, bez loopa.

---

## 4ï¸âƒ£ Ne dirati

* âŒ Staging deployment
* âŒ staging.roomvibe.app
* âŒ Namecheap redirecte (veÄ‡ su uklonjeni)

---

## 5ï¸âƒ£ Definicija gotovosti (DONE)

Task je gotov kad:

* Root domena radi bez obzira kako se upiÅ¡e
* SEO-friendly 301 redirect je aktivan
* `app.roomvibe.app` ostaje jedini kanonski URL

---

âœ³ï¸ Ako Replit ima internu opciju za redirect bez koda â€” moÅ¾e se koristiti, **ali server-side redirect mora ostati fallback**.

---

ğŸ“Œ **Ovo je infra task â€” nema veze sa UI-em, planovima ili stagingom.**
