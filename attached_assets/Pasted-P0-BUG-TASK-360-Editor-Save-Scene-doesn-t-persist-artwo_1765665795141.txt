P0 BUG TASK â€” 360Â° Editor: â€œSave Sceneâ€ doesnâ€™t persist artwork assignments (Classic Gallery)
Problem summary

In 360Â° Editor (Classic Gallery):
I assign artworks to wall slots, click Save Scene, but when I reopen the same exhibition/editor, all wall slots are empty again (no artworks loaded), and each slot shows -- Select Artwork --.

Environment: staging.roomvibe.app
Page: /#/gallery/exhibitions/:id/360-editor
Template: Classic Gallery

âœ… Expected

After assigning artworks to wall slots and clicking Save Scene:

the saved scene must persist in DB

reopening the editor should restore all assignments exactly

switching viewpoints should keep the same assigned artworks

ğŸ” Steps to reproduce

Open 360Â° Editor â†’ Classic Gallery

Select artworks for several wall slots (North Wall 1â€¦5 etc.)

Click Save Scene

Exit editor / refresh / reopen editor

Observe: assignments are gone â†’ dropdown shows -- Select Artwork -- and scene is empty

ğŸ” Investigation checklist (agent)
A) Confirm save request

On Save Scene click:

check Network request fired?

response status 200?

payload includes slot->artwork mapping?

DB record created/updated?

B) Confirm load request

On editor open:

is there a GET call fetching saved scene config?

does response contain mapping?

is client ignoring it / failing to map it?

C) Slot ID mismatch (likely)

Recent gallery changes may have changed slot identifiers.
Example symptoms:

saved keys: northWall1, north_wall_1, North Wall - 1, wallSlots[0]

current UI expects different keys â†’ render shows empty even though DB has data

ğŸ‘‰ Need stable canonical slot keys per template and a migration/normalization layer.

D) Save scope issue

Are we saving to the wrong exhibition ID / wrong scene ID?

Is â€œSave Sceneâ€ only saving camera position but not artworks?

Does it save locally (state) but not backend?

ğŸ› ï¸ Required fix

Persist mapping properly

Ensure Save Scene sends full payload:

templateId

sceneId / exhibitionId

camera view (optional)

assignments: { slotKey: artworkId }

Canonical slot keys

Define stable slot keys for Classic Gallery:

NORTH_1 â€¦ NORTH_5, EAST_1 â€¦, WEST_1 â€¦ (whatever you choose)

UI displays labels (â€œNorth Wall - 1â€) but data uses canonical keys.

Normalize on load

When loading old saved scenes:

map legacy keys â†’ canonical keys

so previously saved scenes still work (backward compatibility)

After save, immediately re-fetch

Optional but recommended:

After successful save, re-fetch saved scene and re-render (QA confidence)

âœ… Acceptance criteria

Assign artworks to 5+ slots â†’ Save Scene â†’ refresh â†’ assignments still visible

Reopen editor later â†’ assignments restored

No console errors

Works consistently for Classic Gallery

Priority

P0 â€“ blocks virtual exhibitions entirely